clear; close all
load results_test_sumrate_Pt_d.mat
Pd_set_nn = set_len_pilot+15;
rate_set_nn = rate_sum;

load 'results_sumrate_bl(8, 100, 3)_10_-100_15.mat'
Pd_set_bl = Pt_d_set+15;
rate_imperfectCSI_set = rate_imperfectCSI;
rate_perfectCSI_set = rate_perfectCSI;

load results_test_sumrate_Pt_d_genarization.mat
rate_set_nn_genarization0 = rate_sum;

load results_test_sumrate_Pt_d_genarization2.mat
rate_set_nn_genarization1 = rate_sum;

blue = [0.00,0.45,0.74];
orange = [0.85,0.33,0.10];
yellow = [0.93,0.69,0.13];
purple = [0.49,0.18,0.56];
green = [0.47,0.67,0.19];

plot(Pd_set_bl,rate_perfectCSI_set,...
    'v-','LineWidth',1.5,...
    'Color',yellow,....
    'MarkerSize',7,...
    'MarkerFaceColor',yellow)
hold on

plot(Pd_set_bl,rate_imperfectCSI_set,...
    's-','LineWidth',1.5,...
    'Color',blue,....
    'MarkerSize',8,...
    'MarkerFaceColor',blue)
hold on

plot(Pd_set_nn,rate_set_nn,...
    'o-','LineWidth',1.5,...
    'Color',orange,....
    'MarkerSize',6.7,...
    'MarkerFaceColor',orange)
hold on


plot(Pd_set_nn,rate_set_nn_genarization0,...
    '<--','LineWidth',1.5,...
    'Color',purple,....
    'MarkerSize',6.7,...
    'MarkerFaceColor',purple)
hold on

plot(Pd_set_nn,rate_set_nn_genarization1,...
    '>--','LineWidth',1.5,...
    'Color',green,....
    'MarkerSize',6.7,...
    'MarkerFaceColor',green)
hold on


grid on

legend('Perfect CSI+BCD','LMMSE channel estimation+BCD','Deep learning ($P_d^{\rm{train}}=P_d$) ', 'Deep learning ($P_d^{\rm{train}}=15$dBm)',  'Deep learning ($P_d^{\rm{train}}=25$dBm)','Location','southeast','Interpreter','latex')
xlabel('Downlink transmit power $P_d$ [dBm]','Interpreter','latex')
ylabel('Sum rate [bps/Hz]','Interpreter','latex')
xticks(Pd_set_nn)
